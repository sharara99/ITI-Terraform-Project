# ğŸ“˜ Terraform AWS Scalable Infrastructure with Ansible Automation

## ğŸ§  Architecture Diagram

![Automated Photo](Animation.gif)

This project provisions a **complete AWS infrastructure using Terraform modules** to create a highly available, scalable web application backend.  
After provisioning, it uses **Ansible** to configure web servers automatically.

## ğŸ“¦ Project Structure

```bash
terraform-project/
â”œâ”€â”€ ansible/
â”‚   â”œâ”€â”€ index.php.j2         # Ansible page template (index.php)
â”‚   â”œâ”€â”€ playbook.yml         # Ansible playbook to configure EC2 instances
â”‚   â””â”€â”€ inventory            # Automatically generated by Terraform after apply
â”œâ”€â”€ modules/
â”‚   â””â”€â”€ vpc/                 # VPC and Subnets
â”‚   â””â”€â”€ nat_gateway/         # Internet and NAT Gateway
â”‚   â””â”€â”€ route_table/         # Public and Private route tables
â”‚   â””â”€â”€ security_groups/     # Security groups (ALB, EC2, RDS)
â”‚   â””â”€â”€ ssh_key/             # EC2 SSH key pair
â”‚   â””â”€â”€ load_balancer/       # ALB + Target Groups + Listeners
â”‚   â””â”€â”€ autoscaling/         # Launch Configuration + AutoScaling Group + Inventory Generator
â”‚   â””â”€â”€ rds/                 # MySQL RDS Instance
â”‚   â””â”€â”€ s3_backend/          # Terraform state backend bucket
â”œâ”€â”€ main.tf
â”œâ”€â”€ providers.tf
â”œâ”€â”€ variables.tf
â”œâ”€â”€ terraform.tfvars
â”œâ”€â”€ outputs.tf
â”œâ”€â”€ backend.tf
â””â”€â”€ mykey.pem                # Generated SSH private key
```
## ğŸš€ Features

- Modular Terraform code.
- Scalable architecture with AutoScaling Group.
- Application Load Balancer for routing traffic.
- Secure RDS MySQL database in private subnets.
- Secure and minimal access security groups.
- Ansible integration to provision web servers post deployment.
- Automatically generated Ansible Inventory file.
- Centralized Terraform state storage in S3 bucket.

## ğŸ“Œ Terraform Modules Overview

| Module | Description |
|--------|-------------|
| VPC | Creates VPC + public/private subnets |
| NAT Gateway | Allows private subnets outbound internet |
| Route Tables | Configures subnet routing |
| Security Groups | Define rules for ALB, EC2, RDS |
| SSH Key | Generates and deploys EC2 key pair |
| Load Balancer | Deploys Application Load Balancer |
| Autoscaling | Launch config + Auto Scaling Group |
| RDS | MySQL database deployment |
| S3 Backend | Terraform state backend bucket |

## ğŸ“¦ Ansible Overview

| Component | Description |
|-----------|-------------|
| playbook.yml | Installs Apache, PHP and deploys index.php |
| index.php.j2 | Page template deployed to servers |
| inventory | Generated dynamically after terraform apply |

Once infrastructure is up, Ansible will be used to configure EC2 instances:

```bash
ansible-playbook -i ansible/inventory ansible/playbook.yml
```

## ğŸ“ Documentation

This project can be set up and used through **two different paths** depending on your needs:

1. **Infrastructure Provisioning (Automated via Terraform)**  
   This approach uses modular **Terraform configurations** to automatically provision the entire AWS infrastructure including:
   
   - VPC and Subnets
   - Internet Gateway and NAT Gateway
   - Application Load Balancer (ALB)
   - Auto Scaling Group (EC2 Instances)
   - RDS MySQL Database (Private Subnet)
   - Security Groups
   - S3 Bucket for state backend

   You can follow the step-by-step guide and explanation in the documentation [here](https://shard-knee-e78.notion.site/Scalable-Web-Application-Infrastructure-on-AWS-Terraform-Ansible-1e688e9cf72c80fe84bfc347bc8bc5d7?pvs=4) to set up the infrastructure.

2. **Automated Server Configuration (Ansible)**  
   Once the infrastructure is provisioned, the EC2 instances need to be configured.  
   This is automated using **Ansible Playbooks** that:
   
   - Install Apache and PHP
   - Deploy a simple index.php template
   - Ensure the web service is running

   You can follow the [Ansible automation documentation](https://shard-knee-e78.notion.site/Modules-Of-Scalable-Web-Application-Infrastructure-1e688e9cf72c804e8b54c613f93822c0?pvs=4) to apply Ansible playbooks easily on the provisioned infrastructure.

Both approaches work together to provide a **fully automated and scalable production environment**, from infrastructure creation to server configuration and deployment.

---
